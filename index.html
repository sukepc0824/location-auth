<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <body onload="autoGetLocation()">
        <p id="output">位置情報を取得中...</p>

        <script>
            const targetLat = 33.244765;
            const targetLng = 131.62293;

            function calculateDistance(lat1, lng1, lat2, lng2) {
                const R = 6371e3;
                const toRad = Math.PI / 180;
                const dLat = (lat2 - lat1) * toRad;
                const dLng = (lng2 - lng1) * toRad;

                const a = Math.sin(dLat / 2) ** 2 +
                    Math.cos(lat1 * toRad) * Math.cos(lat2 * toRad) *
                    Math.sin(dLng / 2) ** 2;
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                return R * c;
            }

            function getLocation() {
                if (!navigator.geolocation) {
                    document.getElementById("output").textContent = "このブラウザでは位置情報が使用できません。";
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const distance = calculateDistance(lat, lng, targetLat, targetLng);
                        document.getElementById("output").textContent =`現在地: (${lat}, ${lng}) 高校までの距離: ${distance}m`;
                    },
                    (error) => {
                        document.getElementById("output").textContent =
                            `位置情報の取得に失敗しました: ${error.message}`;
                    }
                );
            }
        </script>
    </body>

</body>

</html>